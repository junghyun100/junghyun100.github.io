---
layout: post
title: "네트워크 - 802.11"
tags: [컴퓨터 네트워크]
comments: true

---

컴퓨터 네트워크를 공부하면서 정리를 한 내용들 입니다.

-참고 K-mooc 부산 대학교 유영환 교수님 : 컴퓨터 네트워크 강의

---

# 802.11 LAN Architecture

<img src="/images/2021년/0226/802.11 LAN Architecture.PNG">

802.11 랜의 와이파이의 대표적인 구조는 <strong>Infrastructure 모드</strong>입니다.

Infrastructure 모드에서는 베이스 스테이션(공유기)를 통해서 

데이터를 `허브`, `스위치` 또는 `라우터`에 모읍니다.

이것들은 엑세스 포인트가 모아 온 데이터를 인터넷에 보내거나, 

또는 인터넷에서 온 데이터를 엑세스 포인트로 넘겨 주는 역할을 합니다.

이런 하나의 엑세스 포인트가 커버하는 이런 영역을 

보통 <strong>BSS(Basic Service Set)</strong>라고 부릅니다.

또 보통 와이파이에서는 베이스 스테이션이라고 잘 부르지 않고 

`엑세스 포인트`라고 부릅니다.

# 802.11 Channels

<img src="/images/2021년/0226/Channels.PNG">

802.11은 채널을 보통 11개로 나눠서 사용합니다.

그림은 802.11b가 `2.4GHz ~ 2.485GHz`의 대역, 

약 80 MHz 정도영역에서 `11개`의 채널을 서비스 하는 예시입니다.

1번부터 11번 까지 채널이 있는데 

한 채널의 넓이가 `20 MHz 대역`의 채널 넓이를 사용 합니다.

20 MHz 11개라고 하면 220 MHz가 필요한데

범위가 80 MHz 밖에 안 되기 때문에 

사실 이 채널들을 겹치지 않게 놓을 수는 없습니다.

그래서 그림에 있는 것 처럼 11개의 채널이 오버랩 됩니다.

그래서 되도록이면 서로 겹치지 않도록 사용하는 것이 좋기 때문에

가장 많이 사용 되는 채널이 그림에서 보시는 1번, 6번, 11번 입니다.

만약에 내 AP 주변에 서로 간섭을 일으킬 수 있는 AP가 2개 있을 때 

셋이서 서로 1번, 6번, 11번을 나눠 쓰면

<strong>서로 겹치지 않으므로 간섭을 최소화</strong> 할 수 있습니다.

요즘의 공유기에 보면 자동으로 채널을 선정 할 수 있게 되어 있어서

엑세스 포인트를 설치 하게 되면 주변을 감시를 해서 

다른 주변에 있는 AP들을 보고 

"어떤 채널을 쓸 때 가장 간섭을 적게 일으킬 수 있는가?"를 계산해서 선정합니다.

# AP Association.PNG

<img src="/images/2021년/0226/AP Association.PNG">

어떤 장소에 가서 AP를 접속 할 때 어떤 과정을 거치는지 알아봅니다.

1. 각각의 AP들이 각각의 beacon 메시지 보냅니다.<br>
메시지에는 AP의 이름(SSID)와  MAC address가 포함됩니다.<br>
호스트는 그것을 스캔합니다.

2. 그 중 어떤 것을 선택 할 지 결정하고<br>
거기에 association request라는 메시지를 보냅니다.<br>
AP는 암호를 요구 할 수도 있고 요구하지 않을 수 있습니다.

3. AP로 부터 association response 메시지를 받습니다.(연결)

4. AP를 통해서 DHCP 기술을 이용 해서 IP 주소를 얻게 됩니다.

# 802.11 Frame : Addressing

<img src="/images/2021년/0226/802.11 Frame.PNG">

AP와 무선 호스트 사이에 주고 받는 프레임의 형태입니다.

전반적으로 <strong>`이더넷 프레임`과 비슷한 면</strong>이 있습니다. 

끝에 CRC 코드가 4 byte 그리고 payload가 붙습니다.

이더넷 프레임에서는 주소 필드가 두 개 밖에 없었지만

여기서는 주소가 4개 있습니다. 

첫 번째 address는 `wireless host`, 

무선 호스트와 AP 사이에 주고 받는 내용이기 때문에

목적지 receiver의 MAC address가 들어갑니다.

두 번째 address는 `wireless 호스트`나 

`AP 중에서 보내는 곳의 MAC address`를 쓰게 됩니다.

세 번째 address는 AP가 접속 되어 있는 `허브 스위치의 MAC address`,

허브 스위치는 라우터나 스위치, 게이트웨이로써

그것의 MAC address를 씁니다.

네 번째 주소는 `ad hoc 모드로 사용하는 주소 필드`입니다.

# 802.11 Frame : Addressing 동작과정

<img src="/images/2021년/0226/802.11 addressing.PNG">

호스트1이 AP측으로 프레임을 보냅니다.

그러면 주소 필드 앞에 세 개 중에 

첫 번째 필드는 수신자인 `AP의 MAC address`를 쓰고 

두 번째는 자신 `H1의 MAC address`를 쓰고,

세 번째는 `라우터의 MAC address`를 쓰게 됩니다.

그것이 802.11 와이파이의 프레임 형태 입니다.

AP에서 라우터 측으로 전달이 될 때는

AP MAC address를 떼버리고

Destination MAC 주소를 라우터의 MAC으로 쓰고 

다음에 보내는 H1 호스트의 MAC address를 써서

이더넷 프레임을 만들어서 전달합니다.

그래서 이 사이에서 802.11 프레임은 없어져 버립니다.

그 과정에서 프로토콜 번역을 해서 

전달이 된다는 것을 알 수 있습니다.

---
